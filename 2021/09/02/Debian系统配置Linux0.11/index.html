<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Debian系统配置Linux0.11 | Set sail!</title>
  <meta name="keywords" content=" 实验环境配置 , Debian , Linux0.11 ">
  <meta name="description" content="Debian系统配置Linux0.11 | Set sail!">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta property="og:type" content="website">
<meta property="og:title" content="about">
<meta property="og:url" content="http://example.com/about/index.html">
<meta property="og:site_name" content="Set sail!">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-09-02T08:52:58.000Z">
<meta property="article:modified_time" content="2021-09-02T08:52:58.487Z">
<meta property="article:author" content="Red_Leaves">
<meta name="twitter:card" content="summary">


<link rel="icon" href="/img/favicon.png">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/atom-light.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.1.0" ></script>

<meta name="generator" content="Hexo 5.4.0"></head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="">
  <input class="theme_blog_path" value="">
  <input id="theme_shortcut" value="true" />
  <input id="theme_highlight_on" value="true" />
  <input id="theme_code_copy" value="true" />
</div>



<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/"
   class="avatar_target">
    <img class="avatar"
         src="/img/avatar.jpg"/>
</a>
<div class="author">
    <span>Red_Leaves</span>
</div>

<div class="icon">
    
        
            <a title="github"
               href="https://github.com/red_leaves699"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-github"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="email"
               href="mailto:Algorithm_sort@163.com"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-email"></use>
                    </svg>
                
            </a>
        
    
</div>




<ul>
    <li>
        <div class="all active" data-rel="全部文章">全部文章
            
                <small>(18)</small>
            
        </div>
    </li>
    
        
            
                <li>
                    <div data-rel="编程语言">
                        
                        编程语言
                        <small>(3)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="博客_前端">
                        
                        博客_前端
                        <small>(1)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="操作系统">
                        
                        操作系统
                        <small>(2)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="感想随笔">
                        
                        感想随笔
                        <small>(2)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="算法">
                        
                        算法
                        <small>(2)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="题解">
                        
                        题解
                        <small>(4)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="markdown">
                        
                        markdown
                        <small>(4)</small>
                        
                    </div>
                    
                </li>
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
        
            
            
            
    </div>
    <div>
        
            <a class="about  hasFriend  site_url"
               
               href="/about">关于</a>
        
        <a style="width: 50%"
                
                                           class="friends">友链</a>
        
    </div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="18">

<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        友情链接
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="/www.cntv.cn">cntv</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="搜索 快捷键 i"></i>
            <div class="right-title">全部文章</div>
            <i class="iconfont icon-file-tree" data-title="切换到大纲视图 快捷键 w"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="返回"></i>
            <input id="local-search-input" autocomplete="off"/>
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="大小写敏感"></i>
            <i class="iconfont icon-tag" data-title="标签"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">大纲</div>
            <i class="iconfont icon-list" data-title="切换到文章列表"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>2021牛客暑期多校第二场</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>2021牛客暑期多校第一场</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>博客搭建</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>操作系统</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>模拟实训</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>前端</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>生活</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>实验环境配置</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>算法</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>政治历史</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>c语言</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Debian</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Educoder</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Linux0.11</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>markdown</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>stack</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>toposort</a>
            </li>
        
    </div>

</div>

    
    <nav id="title-list-nav">
        
        <a  class="全部文章 操作系统 "
           href="/2021/09/08/Educoder%20%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%9E%E8%AE%AD2.x/"
           data-tag="Educoder,操作系统,模拟实训"
           data-author="" >
            <span class="post-title" title="Educoder 操作系统实训2.x实验">Educoder 操作系统实训2.x实验</span>
            <span class="post-date" title="2021-09-08 08:13:08">2021/09/08</span>
        </a>
        
        <a  class="全部文章 操作系统 "
           href="/2021/09/02/Debian%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AELinux0.11/"
           data-tag="实验环境配置,Debian,Linux0.11"
           data-author="" >
            <span class="post-title" title="Debian系统配置Linux0.11">Debian系统配置Linux0.11</span>
            <span class="post-date" title="2021-09-02 19:38:29">2021/09/02</span>
        </a>
        
        <a  class="全部文章 博客_前端 "
           href="/2021/09/02/%E4%BD%BF%E7%94%A8hexo%E5%92%8Cnode.js%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/"
           data-tag="前端,博客搭建"
           data-author="" >
            <span class="post-title" title="使用Node.js和hexo搭建GitHub博客（以windows为例）">使用Node.js和hexo搭建GitHub博客（以windows为例）</span>
            <span class="post-date" title="2021-09-02 17:49:00">2021/09/02</span>
        </a>
        
        <a  class="全部文章 题解 "
           href="/2021/09/02/G%20-%20League%20of%20Legends/"
           data-tag="2021牛客暑期多校第二场"
           data-author="" >
            <span class="post-title" title="G - League of Legends">G - League of Legends</span>
            <span class="post-date" title="2021-09-02 17:17:58">2021/09/02</span>
        </a>
        
        <a  class="全部文章 编程语言 "
           href="/2021/08/17/C%E8%AF%AD%E8%A8%80%E7%BB%93%E6%9E%84%E4%BD%93/"
           data-tag="c语言"
           data-author="" >
            <span class="post-title" title="C语言结构体">C语言结构体</span>
            <span class="post-date" title="2021-08-17 15:49:47">2021/08/17</span>
        </a>
        
        <a  class="全部文章 编程语言 "
           href="/2021/08/17/C%E8%AF%AD%E8%A8%80%E9%9A%8F%E6%9C%BA%E6%95%B0/"
           data-tag="c语言"
           data-author="" >
            <span class="post-title" title="C语言生成随机数">C语言生成随机数</span>
            <span class="post-date" title="2021-08-17 09:15:35">2021/08/17</span>
        </a>
        
        <a  class="全部文章 编程语言 "
           href="/2021/08/17/%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84/"
           data-tag="c语言"
           data-author="" >
            <span class="post-title" title="C语言二维数组作为函数的参数">C语言二维数组作为函数的参数</span>
            <span class="post-date" title="2021-08-17 09:15:35">2021/08/17</span>
        </a>
        
        <a  class="全部文章 题解 "
           href="/2021/07/26/A%20-%20Alice%20and%20Bob/"
           data-tag="2021牛客暑期多校第一场"
           data-author="" >
            <span class="post-title" title="A - Alice and Bob">A - Alice and Bob</span>
            <span class="post-date" title="2021-07-26 15:13:47">2021/07/26</span>
        </a>
        
        <a  class="全部文章 markdown "
           href="/2021/07/26/image/"
           data-tag="markdown"
           data-author="" >
            <span class="post-title" title="在markdown中插入图片">在markdown中插入图片</span>
            <span class="post-date" title="2021-07-26 15:13:47">2021/07/26</span>
        </a>
        
        <a  class="全部文章 markdown "
           href="/2021/07/26/font/"
           data-tag="markdown"
           data-author="" >
            <span class="post-title" title="markdown 字体，字号，颜色">markdown 字体，字号，颜色</span>
            <span class="post-date" title="2021-07-26 15:13:47">2021/07/26</span>
        </a>
        
        <a  class="全部文章 markdown "
           href="/2021/07/26/indent/"
           data-tag="markdown"
           data-author="" >
            <span class="post-title" title="关于markdown中文首行缩进的问题">关于markdown中文首行缩进的问题</span>
            <span class="post-date" title="2021-07-26 15:13:47">2021/07/26</span>
        </a>
        
        <a  class="全部文章 markdown "
           href="/2021/07/26/special%20sign/"
           data-tag="markdown"
           data-author="" >
            <span class="post-title" title="markdown latex的特殊符号">markdown latex的特殊符号</span>
            <span class="post-date" title="2021-07-26 15:13:47">2021/07/26</span>
        </a>
        
        <a  class="全部文章 感想随笔 "
           href="/2021/07/26/%E7%99%BE%E5%B9%B4/"
           data-tag="政治历史"
           data-author="" >
            <span class="post-title" title="百年未有之大变局">百年未有之大变局</span>
            <span class="post-date" title="2021-07-26 15:13:47">2021/07/26</span>
        </a>
        
        <a  class="全部文章 算法 "
           href="/2021/07/26/ordered%20stack/"
           data-tag="算法,stack"
           data-author="" >
            <span class="post-title" title="单调栈">单调栈</span>
            <span class="post-date" title="2021-07-26 15:13:47">2021/07/26</span>
        </a>
        
        <a  class="全部文章 算法 "
           href="/2021/07/26/toposort/"
           data-tag="算法,toposort"
           data-author="" >
            <span class="post-title" title="拓扑排序">拓扑排序</span>
            <span class="post-date" title="2021-07-26 15:13:47">2021/07/26</span>
        </a>
        
        <a  class="全部文章 题解 "
           href="/2021/07/26/K%20-%20Stack/"
           data-tag="2021牛客暑期多校第二场"
           data-author="" >
            <span class="post-title" title="K - Stack">K - Stack</span>
            <span class="post-date" title="2021-07-26 09:37:47">2021/07/26</span>
        </a>
        
        <a  class="全部文章 题解 "
           href="/2021/07/20/F%20-%20Girlfriend/"
           data-tag="2021牛客暑期多校第二场"
           data-author="" >
            <span class="post-title" title="F - Girlfriend">F - Girlfriend</span>
            <span class="post-date" title="2021-07-20 09:53:17">2021/07/20</span>
        </a>
        
        <a  class="全部文章 感想随笔 "
           href="/2021/07/17/2021-7-17/"
           data-tag="生活"
           data-author="" >
            <span class="post-title" title="2021-07-17 关于自己读书的有趣现象">2021-07-17 关于自己读书的有趣现象</span>
            <span class="post-date" title="2021-07-17 12:13:26">2021/07/17</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>

    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="切换全屏 快捷键 s">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-Debian系统配置Linux0.11" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">Debian系统配置Linux0.11</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            <i class="iconfont icon-category"></i>
            
            
            <a  data-rel="操作系统">操作系统</a>
            
        </span>
        
        
        <span class="tag">
            <i class="iconfont icon-tag"></i>
            
            <a class="color2">实验环境配置</a>
            
            <a class="color2">Debian</a>
            
            <a class="color5">Linux0.11</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
            发布时间 : <time class="date" title='最后更新: 2021-09-08 08:13:33'>2021-09-02 19:38</time>
        
    </div>
    <div class="article-meta">
        
        
        <span id="busuanzi_container_page_pv">
            阅读 :<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFLinux0-11-%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83"><span class="toc-text">什么是Linux0.11 实验环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Debian%E9%83%A8%E7%BD%B2Linux0-11"><span class="toc-text">Debian部署Linux0.11</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A%E5%AE%89%E8%A3%85Debian%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F"><span class="toc-text">第一步：安装Debian操作系统</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E5%AE%89%E8%A3%85Samba%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-text">第二步：安装Samba服务器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E9%85%8D%E7%BD%AEsamba"><span class="toc-text">第三步：配置samba</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E6%AD%A5%EF%BC%9A%E5%AE%89%E8%A3%85bochs"><span class="toc-text">第四步：安装bochs</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A5%E5%85%85%EF%BC%9A"><span class="toc-text">补充：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E6%AD%A5%EF%BC%9A%E7%BC%96%E8%AF%91Linux0-11%E5%86%85%E6%A0%B8%E4%BB%A3%E7%A0%81%E4%B8%AD%E7%9A%84%E6%96%87%E4%BB%B6"><span class="toc-text">第五步：编译Linux0.11内核代码中的文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%85%AD%E6%AD%A5%EF%BC%9A%E4%BD%BF%E7%94%A8GDB%E8%B0%83%E8%AF%95"><span class="toc-text">第六步：使用GDB调试</span></a></li></ol></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>最近要上操作系统课，课上需要我们配置Linux0.11实验环境，在这个过程中，我遇到了大量的问题，耗费了很多时间。必须写个博客来做总结。刚开始我用OpenEuler，配置了一天，结果还是有问题。于是使用Debian再次尝试配置。</p>
<h2 id="什么是Linux0-11-实验环境"><a href="#什么是Linux0-11-实验环境" class="headerlink" title="什么是Linux0.11 实验环境"></a>什么是Linux0.11 实验环境</h2><p>Linux0.11实验环境由三个部分组成，第一为VMware，hyper-v等安装在实体机上的虚拟机A，第二为虚拟机中的Linux系统，第三为虚拟机A中Linux操作系统中的bochs虚拟机B。</p>
<p>程序在客户机上，使用编程软件编好后，使用网络映射，存储到虚拟机A上。在虚拟机A上完成编译后，会生成BIOS文件，这时，使用虚拟机软件bochs，添加BIOS及虚拟硬盘，生成虚拟机B。这样就相当于在Linux环境下，完成了Linux内核的编写和执行。</p>
<p>为什么这么麻烦，因为bochs是纯软件虚拟，而VMware等虚拟机存在硬件虚拟，不好调试输出。</p>
<h2 id="Debian部署Linux0-11"><a href="#Debian部署Linux0-11" class="headerlink" title="Debian部署Linux0.11"></a>Debian部署Linux0.11</h2><h3 id="第一步：安装Debian操作系统"><a href="#第一步：安装Debian操作系统" class="headerlink" title="第一步：安装Debian操作系统"></a>第一步：安装Debian操作系统</h3><p><a target="_blank" rel="noopener" href="https://www.debian.org/CD/http-ftp/">通过 HTTP/FTP 下载 Debian CD/DVD 映像</a></p>
<p>最好安装一个图形化界面，如果是只用来做实验的话推荐Xfce，占用资源少</p>
<p>这一步比较简单，因为Debian在安装上难度和ubuntu差不多。</p>
<h3 id="第二步：安装Samba服务器"><a href="#第二步：安装Samba服务器" class="headerlink" title="第二步：安装Samba服务器"></a>第二步：安装Samba服务器</h3><ol>
<li><p>确保虚拟机网络是NAT模式，至于为什么？原理在这里：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/aeolian/p/8882790.html">VMWare虚拟机网络配置</a></p>
</li>
<li><p>在虚拟机上使用<strong>ifconfig</strong>命令看看虚拟机的ip地址，但是。。。我们发现没有<strong>ifconfig</strong>这个命令，出错情况如下：</p>
</li>
</ol>
<pre><code class="bash">bash: ifconfig：未找到命令
</code></pre>
<p>​        这是因为ifconfig命令要被Linux淘汰了，取而代之的是功能更强的<strong>ip</strong>命令。<a target="_blank" rel="noopener" href="https://www.runoob.com/linux/linux-comm-ip.html">Linux ip 命令</a></p>
<p>​        ifconfig 现在可以用 ip addr 代替。其他的替代详见下表：</p>
<p><img src="http://www.linuxidc.com/upload/2014_06/14060411029186.png" alt="ifconfig 和 ip命令简要对应"></p>
<ol start="3">
<li>客户机和虚拟机之间需要建立网络映射，如果直接ping虚拟机的ip，会发现虚拟机可以ping通，但磁盘映射始终建立不了。这是因为系统的安全问题（想想如果你的文件能被局域网里的坏家伙访问，会是什么结果），我们需要一个媒介，这个媒介就是Samba。通过Samba，我们才能建立两个主机的安全访问。安装命令如下：</li>
</ol>
<pre><code class="bash">sudo apt-get install samba #安装samba
whereis samba #查看samba的安装目录
</code></pre>
<p>安装时可能会出现如下的问题</p>
<pre><code class="sh">更换介质：请把标有
 “Debian GNU/Linux 11.0.0 _Bullseye_ - Official amd64 DVD Binary-1 20210814-10:04”
的盘片插入驱动器“/media/cdrom/”再按「回车」键
</code></pre>
<p>解决方法：</p>
<pre><code class="sh"># 修改/etc/apt/sources.list文件
sudo vim /etc/apt/sources.list
# 注释掉deb cdrom:开头的一行（第一行），然后更新一下
sudo apt-get update
</code></pre>
<h3 id="第三步：配置samba"><a href="#第三步：配置samba" class="headerlink" title="第三步：配置samba"></a>第三步：配置samba</h3><p>samba的配置文件在  /etc/samba 目录下，名称为 smb.conf</p>
<p>先将原来的文件备份<code>sudo cp /etc/samba/smb.conf /etc/samba/smb.conf.bak</code></p>
<p>使用vi命令，以管理员身份打开 bash <code>sudo vim /etc/samba/smb.conf</code></p>
<p>仔细阅读带注释的地方，完成个性化的修改，复制到配置文件的最后面</p>
<pre><code class="bash">[global]
        workgroup = SAMBA
        security = user

        passdb backend = tdbsam

        printing = cups
        printcap name = cups
        load printers = yes
        cups options = raw
        log file = /var/log/samba/log.%m
         #主机名，可修改
        netbios name = cccs

[red_leaves]
# service introduction
#无关紧要
comment = &quot;This is a share service&quot;
# share folder
#共享目录，可修改
path = /home/red_leaves
# close anonymous access
public = yes
# writable
writable = yes
</code></pre>
<p>而后启动samba服务</p>
<pre><code class="bash">sudo /etc/init.d/smbd start
</code></pre>
<p>为了方便，今后不用再手动打开samba，可以将samba设为开机自启</p>
<pre><code class="bash">sudo systemctl enable smbd.service
sudo systemctl enable nmbd.service
</code></pre>
<p>完成之后，创建samba用户</p>
<pre><code class="bash">sudo smbpasswd -a red_leaves
sudo pdbedit -Lv #查看用户详细信息、
</code></pre>
<p>最后再进行磁盘映射，再输入映射文件夹路径，格式为</p>
<pre><code class="shell">\\你的主机名(ip地址)\共享目录
</code></pre>
<p>输入samba的用户名和密码（Linux的用户名和密码也可以）,可以发现成功访问VMware虚拟机的文件</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_40806910/article/details/81917077">更复杂的Linux samba的配置和使用</a></p>
<h3 id="第四步：安装bochs"><a href="#第四步：安装bochs" class="headerlink" title="第四步：安装bochs"></a>第四步：安装bochs</h3><p>千万要注意，不要使用apt yum等命令安装，而且千万不要安装2.6.x版本，2.6.x存在中断表等bug，（bochs黑屏不显示，报hardware error错误），要在<a target="_blank" rel="noopener" href="https://bochs.sourceforge.io/">官网</a>下载安装包，手动编译安装。</p>
<p>课程中要求用gdb，所以这里在./configure选项中中使用gdb</p>
<pre><code class="sh"># prefix指定目录，自己随意指定即可,docbook, --enable-disasm被新版的调试器删除了，在编译的时候会出错,要去掉
# --enable-debugger 使用bochs的调试器，--enable-gdb-stub 使用gdb
./configure --with-x11 --enable-gdb-stub --enable-pci --enable-pcidev --enable-plugins --enable-ne2000 --enable-pnic --disable-docbook 
make
sudo make install
</code></pre>
<p>安装时报错“fatal error: X11/Xlib.h: 没有那个文件或目录”，说明缺少c++运行库，安装即可</p>
<pre><code class="sh">sudo apt-get install build-essential
sudo apt-get install xorg-*
sudo apt-get install libgtk2.0-dev
</code></pre>
<h4 id="补充："><a href="#补充：" class="headerlink" title="补充："></a>补充：</h4><p>要想利用win机器向共享文件夹复制内容，需要在Linux中对共享文件夹提权</p>
<pre><code class="sh">chmod 777 共享文件夹名 -R
</code></pre>
<h3 id="第五步：编译Linux0-11内核代码中的文件"><a href="#第五步：编译Linux0-11内核代码中的文件" class="headerlink" title="第五步：编译Linux0.11内核代码中的文件"></a>第五步：编译Linux0.11内核代码中的文件</h3><p>在这里，我遇到了一个让我头疼的问题。</p>
<p>在linux目录下make编译时，如图所示<img src="https://s3.bmp.ovh/imgs/2021/09/48d70c44bc63ba09.png" alt="image"></p>
<p>这些报错，我在StackOverflow上查询到的结果是32位指令和64位指令不兼容。试了网上所有的方法，都不管用。后来，我才知道这个代码是08年写的。。。太古老了，现代的编译器和操作系统已经无法支持它的编译了。。。于是，我在github上，找到了大佬根据现代amd64Linux修改的代码，终于可以运行了。我把它fork到了我的仓库。<a target="_blank" rel="noopener" href="https://github.com/RedLeaves699/Hack-Linux-0.11">点此进入</a></p>
<p>接着运行虚拟机即可。文件是现成的，不需要自己写，唯一需要改的地方可能是下面注释的地方</p>
<hr>
<p>现成的文档在<a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1UNkwMJ6GFx0Mn-xT6J_ZKA">这里</a>下载，提取码y29a</p>
<p>[备用站]<a target="_blank" rel="noopener" href="http://redleaves.ys168.com/">redleaves.ys168.com</a> 实验材料目录</p>
<pre><code class="bash">megs: 16

romimage: file=/usr/local/share/bochs/BIOS-bochs-latest #BIOS-bochs-latest的位置

# with the LGPL BIOS, X windows can be used
vgaromimage: file=/usr/local/share/bochs/VGABIOS-lgpl-latest #VGABIOS-lgpl-latest的位置

boot: floppy

floppya: type=1_44
floppya: 1_44=&quot;Linux/Image&quot;, status=inserted #虚拟软盘（本例中为启动盘）的位置

floppyb: type=1_44
floppyb: 1_44=vvfat:&quot;b/&quot;, status=inserted

ata0: enabled=1, ioaddr1=0x1f0, ioaddr2=0x3f0, irq=14
ata0-master: type=disk, path=&quot;images/hdc-0.11.img&quot;, mode=flat #虚拟硬盘的位置

log: bochsout.txt
panic: action=ask
error: action=report
info: action=report
debug: action=ignore

pci: enabled=1, chipset=i440fx
vga: extension=vbe, update_freq=15
keyboard: serial_delay=250, paste_delay=100000
cpu: ips=15000000
clock: sync=slowdown
mouse: enabled=0
</code></pre>
<p>执行<code>sudo ./run</code>后，可以看到虚拟机正常开启。</p>
<p>如果是黑屏的，要在虚拟机B的控制台加一个c（continue），至此，Debian系统实验环境配置正式完成。</p>
<h3 id="第六步：使用GDB调试"><a href="#第六步：使用GDB调试" class="headerlink" title="第六步：使用GDB调试"></a>第六步：使用GDB调试</h3><p>下载第五步提到的实验环境，在两个终端分别运行./mygdb, ./rungdb脚本即可开始对内核的调试</p>

      
       <hr><span style="font-style: italic;color: gray;"> 转载请注明来源，欢迎对文章中的引用来源进行考证，欢迎指出任何有错误或不够清晰的表达。可以在下面评论区评论，也可以邮件至 Algorithm_sort@163.com </span>
    </div>
</article>







    
        <!-- MathJax配置，可通过单美元符号书写行内公式等 -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
    "HTML-CSS": {
        preferredFont: "TeX",
        availableFonts: ["STIX","TeX"],
        linebreaks: { automatic:true },
        EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
    },
    tex2jax: {
        inlineMath: [ ["$", "$"], ["\\(","\\)"] ],
        processEscapes: true,
        ignoreClass: "tex2jax_ignore|dno",
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
        equationNumbers: { autoNumber: "AMS" },
        noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
        Macros: { href: "{}" }
    },
    messageStyle: "none"
    });
</script>
<!-- 给MathJax元素添加has-jax class -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>
<!-- 通过连接CDN加载MathJax的js代码 -->
<script type="text/javascript" async
        src="//cdn.jsdelivr.net/npm/mathjax@2.7.8/unpacked/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
<input type="hidden" id="MathJax-js"
        value="//cdn.jsdelivr.net/npm/mathjax@2.7.8/unpacked/MathJax.js?config=TeX-MML-AM_CHTML">
</input>
    




    </div>
    <div class="copyright">
        <p class="footer-entry">
    ©2020-2021 nameETC
</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full" data-title="切换全屏 快捷键 s"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

</body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'default';
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        

        /*高亮代码块行号*/
        

        /*访问数量*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*打赏页面隐藏与展示*/
    

</script>

<!--加入行号的高亮代码块样式-->

<!--自定义样式设置-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*列表样式*/
    

    /* 背景图样式 */
    
    


    /*引用块样式*/
    

    /*文章列表背景图*/
    

    
</style>







</html>
